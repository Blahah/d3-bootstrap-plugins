/*! d3-bootstrap-plugins - v0.0.1 - 2012-07-06
* https://github.com/zmaril/d3-bootstrap-plugins
* Copyright (c) 2012 Zack Maril; Licensed MIT */
d3.selection.prototype.tooltip=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;return arguments.length<2&&(b=a),c=d3.select("body"),g={type:"tooltip",text:"You need to pass in a string for the text value",title:"Title value",content:"Content examples",detection:"shape",placement:"fixed",gravity:"right",position:[100,100],displacement:[0,0],mousemove:!1},j=[],n=[],this.each(function(a,c){var d;d=b.apply(this,arguments),j.push(d);if(d.detection==="voronoi")return n.push([d,c])}),n.length!==0&&(k=d3.select(this[0][0].ownerSVGElement),i=k.append("g").attr("id","__clip__holder__"),console.log(n),l=function(){var a,b,c;c=[];for(a=0,b=n.length;a<b;a++)f=n[a],c.push(f[0].position);return c}(),console.log(l),m=d3.geom.voronoi(l),h=k.attr("height"),o=k.attr("width"),e=d3.geom.polygon([[0,0],[0,h],[o,h],[o,0]]).clip,d=l.map(e),i.append("g").attr("id","clipPaths").selectAll("clipPath").data(n).enter().append("clipPath").attr("id",function(a,b){return"clip-"+b}).append("circle").attr("cx",function(a){return a[0].position[0]}).attr("cy",function(a){return a[0].position[1]}).attr("r",function(a){return 20}),i.append("g").attr("id","clipped").selectAll("path").data(n).enter().append("path").attr("d",function(a,b){return"M"+d[b].join("L")+"Z"}).attr("clip-path",function(a,b){return"url(#clip-"+b+")"})),this.each(function(a,b){var d,e,f;return f=j[b],d=d3.select(this),e=function(a){var b,d;return b=[0,0],f.placement==="mouse"?b=d3.mouse(c.node()):(d=this.ownerSVGElement.getBoundingClientRect(),b[0]=d.left,b[1]=d.top,b[0]+=f.position[0],b[1]+=f.position[1],b[0]+=window.scrollX,b[1]+=window.scrollY),b[0]+=f.displacement[0],b[1]+=f.displacement[1],a.style("left",""+b[0]+"px").style("top",""+b[1]+"px").style("display","block")},d.on("mouseover",function(){var a,b;return b=c.append("div").classed(f.type,!0).classed(f.gravity,!0).classed("fade",!0).style("display","none"),f.type==="tooltip"&&b.append("div").html(f.text).attr("class","tooltip-inner"),f.type==="popover"&&(a=b.append("div").attr("class","popover-inner"),a.append("h3").text(f.title).attr("class","popover-title"),a.append("div").attr("class","popover-content").append("p").html(f.content[0][0].outerHTML)),b.append("div").attr("class","arrow"),setTimeout(function(){return b.classed("in",!0)},10),b.style("display","").call(e.bind(this))}),f.mousemove&&d.on("mousemove",function(){return d3.select("."+f.type).call(e.bind(this))}),d.on("mouseout",function(){var a;return a=d3.selectAll("."+f.type).classed("in",!1),setTimeout(function(){return a.remove()},150)})})};